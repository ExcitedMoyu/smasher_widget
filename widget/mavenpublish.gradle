apply plugin: 'maven-publish'

afterEvaluate {
    publishing {
        publications {
            release(MavenPublication) {
                //å®šä¹‰æ’ä»¶çš„åœ¨æœ¬åœ° maven ä¸­çš„ id
                from components.release
                groupId 'com.smasher.primary'
                artifactId 'widget'
                //å®šä¹‰æ’ä»¶çš„åœ¨æœ¬åœ° maven ä¸­çš„ç‰ˆæœ¬å·
                version '2.0.6'
            }

            debug(MavenPublication) {
                //å®šä¹‰æ’ä»¶çš„åœ¨æœ¬åœ° maven ä¸­çš„ id
                from components.debug
                groupId 'com.smasher.primary'
                artifactId 'widget'
                //å®šä¹‰æ’ä»¶çš„åœ¨æœ¬åœ° maven ä¸­çš„ç‰ˆæœ¬å·
                version '2.0.6'
            }
        }

        repositories {
            maven {
                // å‘å¸ƒä½ç½®
                url uri('http://127.0.0.1:8081/repository/maven-releases/')
                credentials {
                    username 'admin'
                    password 'admin'
                }
            }
        }
    }
}


////ç¼–è¯‘å‘å¸ƒåˆ°maven
//task deploy{
//    dependsOn tasks.clean
//    dependsOn tasks.build
//    dependsOn tasks.publish
//    tasks.preBuild.mustRunAfter(tasks.clean)
//    //ğŸ‘‡
//    tasks.generatePomFileForMavenCorePublication.mustRunAfter(tasks.build)
//}


